# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Development Commands

- `npm run build` - Build production bundle to public/bundle.js

## Architecture Overview

This is a web-based Haxe dependency visualization tool that processes dependency dump files and renders interactive graph visualizations using Sigma.js.

### Core Architecture

The application follows a modular structure:

- **Entry Point** (`src/index.mjs`): Handles file drag/drop, paste events, and bootstraps the visualization
- **Parser** (`src/parser.mjs`): Processes Haxe dependency dump files into dependency maps
- **Graph Creation** (`src/createGraph.mjs`): Transforms dependency data into Graphology graph objects with layout algorithms
- **Renderer** (`src/renderer.mjs`): Manages Sigma.js visualization, user interactions, and graph state
- **Configuration** (`src/config.mjs`): GUI-based configuration system using lil-gui for visualization parameters

### Key Components

**Dependency Processing Flow:**
1. Raw dependency dump text → Parser → Map<DepData, Set<DepData>>
2. Dependency map → Graph creation with filtering, labeling, and positioning
3. Graph → Sigma.js renderer with interactive features

**Graph Visualization Features:**
- Bidirectional dependency relationships (dependencies vs dependants)
- Node sizing based on dependency counts
- Smart labeling with regex-based path extraction
- Package-based color coding and clustering
- Interactive search with filtering
- Path highlighting and cycle detection

**Layout System:**
- Multiple initial positioning algorithms (bubble pack, circular, top-down)
- Force-atlas2 physics simulation with configurable parameters
- Package-based force grouping for better visual organization

### Data Flow

Input files are `dependencies.dump` or `dependants.dump` generated by Haxe compiler with `-D dump-dependencies`. The parser handles both formats, with `dependants.dump` reversing the dependency direction. All configuration is persisted to localStorage and managed through the GUI panel.

### Build System

Uses esbuild with custom plugin for build metadata injection. The build process bundles all source files into a single `public/bundle.js` file served alongside `public/index.html`.
